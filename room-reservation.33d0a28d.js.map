{"version":3,"sources":["components/room-reservation/room-reservation.js"],"names":["jQuery","$","addClass","on","toggleClass","startDate","find","val","endDate","daysCount","count_diff","cost","parseInt","text","discount","serviceCharge","adServiceCharge","toLocaleString","calculationСostItem","calculationСostTotal","calculationInTotalVal","inTotalVal","wordDeclension","d1","d2","date_1","Date","substr","date_2","n","text_forms","Math","abs","n1"],"mappings":"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","file":"room-reservation.33d0a28d.js","sourceRoot":"..\\src","sourcesContent":["jQuery(function($) {\r\n    // Показать/спрятать\r\n    $('.room-reservation .datepicker__wrap').addClass('datepicker__wrap-hide');\r\n    \r\n\r\n    $('.room-reservation .date-dropdown').on('click', function(){\r\n\r\n        $('.room-reservation .datepicker__wrap').toggleClass('datepicker__wrap-hide');\r\n\r\n    });\r\n\r\n    // Скрытие календаря по клику\r\n    // $(document).click(function(event) {\r\n    //     if ($(event.target).closest(\".datepicker__wrap\").length) return;\r\n    //     if ($(event.target).closest(\".room-reservation__date .date-dropdown\").length) return;\r\n    //     $(\".datepicker__wrap\").addClass('datepicker__wrap-hide')\r\n    //     event.stopPropagation();\r\n    //   });\r\n    \r\n\r\n    //Расчет количества дней и стоимости\r\n\r\n    var startDate = $('.date-dropdown').find('[name = startDate]').val();\r\n    var endDate = $('.date-dropdown').find('[name = endDate]').val();\r\n    var daysCount = count_diff(endDate, startDate);\r\n    var cost = parseInt($('.room-reservation__number-cost').text());\r\n    var discount = $('.room-reservation__item-wrap').find('.room-reservation__service-charge-discount').text();\r\n    var serviceCharge = $('.room-reservation__item-wrap').find('.room-reservation__service-charge-val').text();\r\n    var adServiceCharge = $('.room-reservation__ad-service').find('.room-reservation__ad-service-charge-val').text();\r\n      \r\n    //Запись значений по умолчанию  \r\n    $('.room-reservation__header').find('.room-reservation__number-cost').text(cost.toLocaleString() + '₽');\r\n    $('.room-reservation__item-wrap').find('.room-reservation__service-charge-discount').text(parseInt(discount).toLocaleString() + '₽');\r\n\r\n    calculationСostItem(cost, daysCount);\r\n    calculationСostTotal(cost, daysCount);\r\n    calculationInTotalVal(cost, daysCount, discount, serviceCharge, adServiceCharge);\r\n\r\n    $('.room-reservation').find('[name = accept]').on('click', function() {\r\n\r\n        //Расчет количества дней\r\n\r\n        startDate = $('.date-dropdown').find('[name = startDate]').val();\r\n        endDate = $('.date-dropdown').find('[name = endDate]').val();\r\n        daysCount = count_diff(endDate, startDate);\r\n\r\n        //Расчет стоимости\r\n\r\n        calculationСostItem(cost, daysCount);\r\n        calculationСostTotal(cost, daysCount);\r\n        calculationInTotalVal(cost, daysCount, discount, serviceCharge, adServiceCharge);\r\n        \r\n    });\r\n\r\n    //Расчет итоговой стоимости\r\n\r\n    function calculationInTotalVal(cost, daysCount, discount, serviceCharge, adServiceCharge) {\r\n        var inTotalVal =  parseInt(cost) * parseInt(daysCount) - parseInt(discount) + parseInt(serviceCharge) + parseInt(adServiceCharge);\r\n        return $('.room-reservation__in-total-val').text(inTotalVal.toLocaleString() + '₽');         \r\n        };\r\n\r\n    //Расчет стоимости номера за все дни\r\n\r\n    function calculationСostTotal(cost, daysCount) {\r\n        return $('.room-reservation__cost-total').text((parseInt(cost) * parseInt(daysCount)).toLocaleString() + '₽');\r\n        };\r\n        \r\n    //Запись количества дней и стоимости номера\r\n\r\n    function calculationСostItem(cost, daysCount) {\r\n        return $('.room-reservation__cost-item').text(cost.toLocaleString() + '₽ x ' + daysCount + wordDeclension(daysCount, [\" Сутки\", \" Суток\", \" Суток\"]))\r\n        };  \r\n\r\n\r\n    function count_diff(d1, d2) {\r\n        var date_1 = new Date(parseInt(d1.substr(6, 4), 10), parseInt(d1.substr(3, 2), 10), parseInt(d1.substr(0, 2), 10)); \r\n        var date_2 = new Date(parseInt(d2.substr(6, 4), 10), parseInt(d2.substr(3, 2), 10), parseInt(d2.substr(0, 2), 10)); \r\n        return ((date_1-date_2)/86400000);\r\n        };\r\n\r\n\r\n    \r\n    function wordDeclension(n, text_forms) {  \r\n        n = Math.abs(n) % 100; var n1 = n % 10;\r\n        if (n > 10 && n < 20) { return text_forms[2]; }\r\n        if (n1 > 1 && n1 < 5) { return text_forms[1]; }\r\n        if (n1 == 1) { return text_forms[0]; }\r\n        return text_forms[2];\r\n    }\r\n\r\n});    \r\n    \r\n"]}